# 读取文档

## 一、文档编码

文档编码是一种告诉程序——无论是计算机的操作系统还是 Python 代码——读取文档的规则。文档编码的方式通常可以根据文件的扩展名进行判断，虽然文件扩展名并不是由编码确定的，而是由开发者确定的。例如，如果我把 myImage.jpg 另存为 myImage.txt，不会出现任何问题，但当我用文本编辑器打开它的时候就有问题了。好在这种情况很少见，如果要正确地读取一个文档，必须要知道它的扩展名。

从最底层的角度看，所有文档都是由 0 和 1 编码而成的。而在高层(贴近用户的层级)，编码算法会定义“每个字符多少位”或“每个像素的颜色值用多少位”(图像文件里)之类的事情，在那里你会遇到一些数据压缩算法或体积缩减算法，比如 PNG 图像编码格式 (一种无损压缩的位图图形格式)。

## 二、纯文本

虽然把文件存储为在线的纯文本格式并不常见，但是一些简易网站，或者拥有大量纯文本 文件的“旧式学术”(old-school)网站经常会这么做。例如，互联网工程任务组(Internet Engineering Task Force，IETF)网站就存储了 IETF 发表过的所有文档，包含 HTML、PDF 和纯文本格式(例如 https://www.ietf.org/rfc/rfc1149.txt)。大多数浏览器都可以很好地显示 纯文本文件，采集它们也不会遇到什么问题。

### 文本编码和全球互联网

如果你想正确地读取一个文件，知道它的扩展名就可以了。不过非常奇 怪的是，这条规则不能应用到最基本的文档格式:.txt 文件。

大多数时候用前面的方法读取纯文本文件都没问题。但是，互联网上的文本文件会比较复 杂。下面介绍一些英文和非英文编码的基础知识，包括 ASCII、Unicode 和 ISO 编码，以 及对应的处理方法。

## 三、CSV

进行网页采集的时候，可能会遇到 CSV 文件，也可能有同事希望将数据保存为 CSV 格式。Python 有一个超赞的标准库(https://docs.python.org/3.4/library/csv.html)可以读写 CSV 文件。

### 读取CSV文件

Python 的 csv 库主要是面向本地文件，就是说你的 CSV 文件得存储在你的电脑上。而进
行网络数据采集的时候，很多文件都是在线的。不过有一些方法可以解决这个问题:

- 手动把CSV文件下载到本机，然后用Python定位文件位置;
- 写Python程序下载文件，读取之后再把源文件删除;
- 从网上直接把文件读成一个字符串，然后转换成一个StringIO对象，使它具有文件的
属性。

## 四、PDF

Adobe 在1993年发明PDF格式(Portable Document Format，便携式文档格式)是一种技术革命。 PDF 可以让用户在不同的系统上用同样的方式查看图片和文本文档，无论这些文件是在哪种系统上制作的。

虽然把 PDF 显示在网页上已经有点儿过时了(你已经可以把内容显示成 HTML 了，为什么还要用这种静态、加载速度超慢的格式呢?)，但是 PDF 仍然无处不在，尤其是在处理商务报表和表单的时候。

## 五、微软Word和.docx

大约在 2008 年以前，微软 Office 产品中 Word 用 .doc 文件格式。这种二进制格式很难读取，而且能够读取 word 格式的软件很少。为了跟上时代，让自己的软件能够符合主流软 件的标准，微软决定使用Open Office的类XML格式标准，此后新版Word文件才与其他 文字处理软件兼容，这个格式就是 .docx。




































































